!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function n(t,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._settings=t,this._formElement=r,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=function(t){if(Array.isArray(t))return e(t)}(o=r.querySelectorAll(t.inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonEl=r.querySelector(t.submitButtonSelector)}var r,o;return r=n,(o=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"toggleButtonState",value:function(){this._inputList.every((function(e){return e.validity.valid}))?(this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1):(this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0)}},{key:"_setupEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(n){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setupEventListeners()}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&t(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._api=t,this._data,this._title=n.title,this._image=n.image,this._cardId=n._id,this._userId=n.userId,this._ownerId=n.owner._id,this._currentUserId=i,this._cardSelector=r,this._handleCardClick=o,this._deleteSubmitHandler=a}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){var e=this._cardSelector.content.querySelector(".card").cloneNode(!0);return this._deleteButton=e.querySelector(".card__btn-delete"),e}},{key:"getView",value:function(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".card__image"),this._element.querySelector(".card__title").textContent=this._title,this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._imageElement.src=this._image,this._imageElement.alt="Photo of ".concat(this._title),this._setupEventListeners(),this._element}},{key:"_setupEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){return e._handleLikeButton()})),this._deleteButton.addEventListener("click",(function(){return e._handleDeleteButton()})),this._imageElement.addEventListener("click",(function(){return e._handleCardClick({title:e._title,image:e._image})}))}},{key:"_handleLikeButton",value:function(){var e=this;this._data.likes.some((function(t){return t._id===e._currentUserId}))?this._removeLike():this._addLike()}},{key:"_updateLikeCounter",value:function(){this._liked=this._element.querySelector(".like-button__counter"),this._liked.textContent=this._liked.length}},{key:"_handleDeleteButton",value:function(){this._deleteSubmitHandler(this._cardId,this._element)}},{key:"_addLike",value:function(){var e=this;this._api.addLike(this._cardId).then((function(t){e._likeButton.classList.add("card__btn-like_active"),e._likeCounter.textContent=t.likes.length,e._data=t})).catch((function(e){console.log(e)}))}},{key:"_removeLike",value:function(){var e=this;this._api.removeLike(this._cardId).then((function(t){e._likeButton.classList.remove("card__btn-like_active"),e._likeCounter.textContent=t.likes.length,e._data=t})).catch((function(e){console.log(e)}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),i=o;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_handleEscUp",(function(e){"Escape"===e.key&&n.close()})),c(this,"_mouseClick",(function(e){e.target===n._popupElement&&n.close()})),this._popupElement=document.querySelector(t),this._handleEscUp=this._handleEscUp.bind(this)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close-button").addEventListener("click",(function(){e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscUp),document.addEventListener("mousedown",this._mouseClick)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscUp),document.removeEventListener("mousedown",this._mouseClick)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._previewImage=t._popupElement.querySelector(".popup__image"),t._previewImageTitle=t._popupElement.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e){this._previewImage.src=e.image,this._previewImage.alt="Photo of ".concat(e.title),this._previewImageTitle.textContent=e.title,p(_(a.prototype),"open",this).call(this)}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function g(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popupElement.querySelector(".popup__form"),t._inputList=t._popupElement.querySelectorAll(".popup__input"),t._submitButton=t._popupElement.querySelector(".popup__save-button"),t._handleFormSubmit=r,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;b(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){b(E(a.prototype),"close",this).call(this),this._form.reset()}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(){function e(t){var n=this,r=t.nameSelector,o=t.descriptionSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,"getUserInfo",(function(){return{name:n._name.textContent,description:n._description.textContent,avatar:n._avatar.src}})),L(this,"setUserInfo",(function(e){var t=e.name,r=e.description;n._name.textContent=t,n._description.textContent=r})),this._name=document.querySelector(r),this._description=document.querySelector(o),this._avatar=document.querySelector(i)}var t,n;return t=e,(n=[{key:"setAvatar",value:function(e){var t=e.userAvatar;t&&(this._avatar.src=t)}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j={inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},P=(document.querySelector(".popup_type_add"),{editModal:".popup_type_edit",nameSelector:".profile__name",descriptionSelector:".profile__description",editButton:document.querySelector(".profile__edit-button"),closeButton:document.querySelector(".popup__close-button")}),I={selector:".popup_type_avatar",avatarSelector:".profile__image",button:document.querySelector(".avatar__edit-button"),form:document.querySelector(".popup_type_avatar"),avatarInput:document.querySelector("#avatar-input")},q={addModal:".popup_type_add",addButton:document.querySelector(".profile__add-button"),closeButton:document.querySelector(".popup__close-button")};function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))}},{key:"getAppInfo",value:function(){return Promise.all([this.getCardList(),this.getUserInfo()])}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector(e).querySelector(".popup__save-button");n.textContent=t?"Saving...":"Save"},T=new O({nameSelector:P.nameSelector,descriptionSelector:P.descriptionSelector,avatarSelector:I.avatarSelector}),A=new y(".popup_type_preview");A.setEventListeners();var x=new U({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"acca9dd3-a6a4-4626-88e2-60619602bdf9","Content-Type":"application/json"}}),D=new w({popupSelector:P.editModal,handleFormSubmit:function(e){R(P.editModal,!0),x.setUserInfo({name:e.name,about:e.description}).then((function(e){T.setUserInfo({name:e.name,description:e.about}),D.close()})).catch((function(e){return console.warn("Unable to update profile information: ".concat(e))})).finally((function(){R(P.editModal)}))}}),M=new w({popupSelector:I.selector,handleFormSubmit:function(e){R(I.selector,!0),x.setUserAvatar({avatar:e.avatar}).then((function(e){T.setAvatar({userAvatar:e.avatar}),M.close()})).catch((function(e){return console.warn("Unable change the user avatar: ".concat(e))})).finally((function(){R(I.selector)}))}}),V=new w({popupSelector:q.addModal,handleFormSubmit:function(e){R(q.addModal,!0),x.addCard(e).then((function(e){cardSection.addItem(F(e)),V.close(),console.log(e)})).catch((function(e){return console.error("Unable to add a card: ".concat(e))})).finally((function(){R(q.addModal)}))}}),F=function(e){return new i({data:e,handleCardClick:function(e){A.open(e)}},"#cardTemplate")},H=document.querySelector("#owner-name"),N=document.querySelector("#owner-description");D.setEventListeners(),M.setEventListeners(),V.setEventListeners(),P.editButton.addEventListener("click",(function(){var e=T.getUserInfo();H.value=e.name,N.value=e.description,D.open(e)})),I.button.addEventListener("click",(function(){M.open()})),q.addButton.addEventListener("click",(function(){V.open()}));var J=document.querySelector(".popup_type_edit"),z=document.querySelector(".popup_type_avatar"),$=document.querySelector(".popup_type_add");new n(j,J).enableValidation(),new n(j,z).enableValidation(),new n(j,$).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVXpHLGlCQUFpQixTQUFTLFdBQy9DK0ksRUFBUVMsVUFPVixJQUFNSSxFQUFhNUYsU0FBU2pGLGNBQWMsb0JBQ3BDOEssRUFBZTdGLFNBQVNqRixjQUFjLHNCQUN0QytLLEVBQVk5RixTQUFTakYsY0FBYyxtQkFFZixJQUFJbkIsRUFBY2lJLEVBQXdCK0QsR0FDbERHLG1CQUVVLElBQUluTSxFQUFjaUksRUFBd0JnRSxHQUNsREUsbUJBRUssSUFBSW5NLEVBQWNpSSxFQUF3QmlFLEdBQ2xEQyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIGVycm9yRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGFsbFZhbGlkID0gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICAgICAgICBpZiAoYWxsVmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldHVwRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoYXBpLCBkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgY3VycmVudFVzZXJJZCwgZGVsZXRlU3VibWl0SGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuX2FwaSA9IGFwaTtcclxuICAgICAgICB0aGlzLl9kYXRhIC0gZGF0YTtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IGRhdGEudGl0bGU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSBkYXRhLmltYWdlO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IGRhdGEudXNlcklkO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl9jdXJyZW50VXNlcklkID0gY3VycmVudFVzZXJJZDtcclxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZVN1Ym1pdEhhbmRsZXIgPSBkZWxldGVTdWJtaXRIYW5kbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRTZWxlY3Rvci5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgJy5jYXJkX19idG4tZGVsZXRlJyxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXcoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl90aXRsZX1gO1xyXG5cclxuICAgICAgICB0aGlzLl9zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpKTtcclxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyB0aXRsZTogdGhpcy5fdGl0bGUsIGltYWdlOiB0aGlzLl9pbWFnZSB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XHJcbiAgICAgICAgY29uc3QgaXNMaWtlZCA9IHRoaXMuX2RhdGEubGlrZXMuc29tZSgobGlrZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobGlrZS5faWQgPT09IHRoaXMuX2N1cnJlbnRVc2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGlzTGlrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlTGlrZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZExpa2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3VwZGF0ZUxpa2VDb3VudGVyKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VkID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uX19jb3VudGVyXCIpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VkLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZWQubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlU3VibWl0SGFuZGxlcih0aGlzLl9jYXJkSWQsIHRoaXMuX2VsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGRMaWtlKCkge1xyXG4gICAgICAgIHRoaXMuX2FwaVxyXG4gICAgICAgICAgICAuYWRkTGlrZSh0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fYnRuLWxpa2VfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhID0gcmVzO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUxpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fYXBpXHJcbiAgICAgICAgICAgIC5yZW1vdmVMaWtlKHRoaXMuX2NhcmRJZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19idG4tbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGEgPSByZXM7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjVXAgPSB0aGlzLl9oYW5kbGVFc2NVcC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gICAgXHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NVcCk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fbW91c2VDbGljayk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjVXApO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX21vdXNlQ2xpY2spO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NVcCA9IChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfbW91c2VDbGljayA9IChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9OyAgICBcclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcucG9wdXBfX2ltYWdlJyxcclxuICAgICk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnBvcHVwX19jYXB0aW9uJyxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmltYWdlO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IGBQaG90byBvZiAke2RhdGEudGl0bGV9YDtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gZGF0YS50aXRsZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWU7XHJcbiAgfVxyXG4gIFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICB9KVxyXG4gfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbyA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvID0gKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkgID0+IHtcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEF2YXRhcih7IHVzZXJBdmF0YXIgfSkge1xyXG4gICAgICAgIGlmICh1c2VyQXZhdGFyKSB7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXJBdmF0YXI7XHJcbiAgICB9XHJcbn1cclxufSIsIi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDYXJkIGFycmF5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgaW1hZ2U6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHRpdGxlOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICAgIGltYWdlOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICBpbWFnZTogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBpbWFnZTogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgICAgaW1hZ2U6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgICAgaW1hZ2U6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIlxyXG4gICAgfVxyXG4gIF07XHJcblxyXG4gIGV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zYXZlLWJ1dHRvbl90eXBlX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxuICB9O1xyXG5cclxuICBleHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gICAgICBjYXJkU2VjdGlvbjogJy5wbGFjZXNfX2xpc3QnLFxyXG4gICAgICBjYXJkVGVtcGxhdGU6ICcjY2FyZFRlbXBsYXRlJyxcclxuICAgICAgcHJldmlld1BvcHVwOiAnLnBvcHVwX3R5cGVfcHJldmlldycsXHJcbiAgICAgIGFkZE1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkXCIpLFxyXG4gIH07XHJcblxyXG4gIGV4cG9ydCBjb25zdCBwb3B1cEVkaXRVc2VyID0ge1xyXG4gICAgZWRpdE1vZGFsOiBcIi5wb3B1cF90eXBlX2VkaXRcIixcclxuICAgIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gICAgZGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICAgIGVkaXRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIiksXHJcbiAgICBjbG9zZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpLFxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IHtcclxuICAgIHNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfYXZhdGFyJyxcclxuICAgIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2ltYWdlJyxcclxuICAgIGJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF2YXRhcl9fZWRpdC1idXR0b24nKSxcclxuICAgIGZvcm06IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2F2YXRhcicpLFxyXG4gICAgYXZhdGFySW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXItaW5wdXQnKSxcclxuICB9OyAgXHJcblxyXG4gIGV4cG9ydCBjb25zdCBwb3B1cEFkZENhcmQgPSB7XHJcbiAgICBhZGRNb2RhbDogXCIucG9wdXBfdHlwZV9hZGRcIixcclxuICAgIGFkZEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKSxcclxuICAgIGNsb3NlQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIiksXHJcbiAgfVxyXG5cclxuXHJcbiAiLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuICBcclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0Q2FyZExpc3QoKSwgdGhpcy5nZXRVc2VySW5mbygpXSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG4gIFxyXG4gIHNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpOyIsImV4cG9ydCBjb25zdCByZW5kZXJMb2FkaW5nID0gKHBvcHVwU2VsZWN0b3IsIGlzTG9hZGluZyA9IGZhbHNlKSA9PiB7XHJcbiAgICBjb25zdCBhY3RpdmVCdXR0b24gPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIik7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIGFjdGl2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3RpdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9OyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbXBvcnQgY2xhc3NlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgc2VsZWN0b3JzLCBwb3B1cEVkaXRVc2VyLCBwb3B1cEVkaXRBdmF0YXIsIHBvcHVwQWRkQ2FyZCwgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgeyByZW5kZXJMb2FkaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZSBpbnN0YW5jZXMgb2YgdGhlIGNsYXNzZXMgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogcG9wdXBFZGl0VXNlci5uYW1lU2VsZWN0b3IsXHJcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogcG9wdXBFZGl0VXNlci5kZXNjcmlwdGlvblNlbGVjdG9yLFxyXG4gIGF2YXRhclNlbGVjdG9yOiBwb3B1cEVkaXRBdmF0YXIuYXZhdGFyU2VsZWN0b3IsXHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcclxuY2FyZFByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTInLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdhY2NhOWRkMy1hNmE0LTQ2MjYtODhlMi02MDYxOTYwMmJkZjknLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwRWRpdFVzZXIuZWRpdE1vZGFsLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHBvcHVwRWRpdFVzZXIuZWRpdE1vZGFsLCB0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0VXNlckluZm8oe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5hYm91dCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0Rm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT5cclxuICAgICAgICBjb25zb2xlLndhcm4oYFVuYWJsZSB0byB1cGRhdGUgcHJvZmlsZSBpbmZvcm1hdGlvbjogJHtlcnJ9YClcclxuICAgICAgKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcmVuZGVyTG9hZGluZyhwb3B1cEVkaXRVc2VyLmVkaXRNb2RhbCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYXZhdGFyRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEVkaXRBdmF0YXIuc2VsZWN0b3IsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIHJlbmRlckxvYWRpbmcocG9wdXBFZGl0QXZhdGFyLnNlbGVjdG9yLCB0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0VXNlckF2YXRhcih7IFxyXG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIgfSlcclxuICAgICAgLnRoZW4oKGluZm8pID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXIoeyB1c2VyQXZhdGFyOiBpbmZvLmF2YXRhciB9KTtcclxuICAgICAgICBhdmF0YXJFZGl0LmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLndhcm4oYFVuYWJsZSBjaGFuZ2UgdGhlIHVzZXIgYXZhdGFyOiAke2Vycn1gKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHJlbmRlckxvYWRpbmcocG9wdXBFZGl0QXZhdGFyLnNlbGVjdG9yKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5cclxuY29uc3QgYWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEFkZENhcmQuYWRkTW9kYWwsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIHJlbmRlckxvYWRpbmcocG9wdXBBZGRDYXJkLmFkZE1vZGFsLCB0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkQ2FyZChkYXRhKVxyXG4gICAgICAudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcclxuICAgICAgICBhZGRGb3JtLmNsb3NlKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coY2FyZERhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGFkZCBhIGNhcmQ6ICR7ZXJyfWApKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcmVuZGVyTG9hZGluZyhwb3B1cEFkZENhcmQuYWRkTW9kYWwpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcblxyXG4vLyBhZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbi8vICAgYWRkQ2FyZFBvcHVwLm9wZW5Nb2RhbCgpO1xyXG4vLyAgIGFkZENhcmRWYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuLy8gfSk7XHJcblxyXG5cclxuXHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmQpID0+XHJcbm5ldyBDYXJkKHtcclxuZGF0YTpjYXJkLCBoYW5kbGVDYXJkQ2xpY2s6IChpbWFnZURhdGEpID0+IHtcclxuY2FyZFByZXZpZXdQb3B1cC5vcGVuKGltYWdlRGF0YSk7XHJcbn0sXHJcbn0sXHJcbnNlbGVjdG9ycy5jYXJkVGVtcGxhdGUsXHJcbik7XHJcblxyXG4vLyBjb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuLy8gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4vLyAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4vLyAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudC5nZXRWaWV3KCkpO1xyXG4vLyAgfSxcclxuLy8gfSxcclxuLy8gIHNlbGVjdG9ycy5jYXJkU2VjdGlvbixcclxuLy8gKTtcclxuLy8gY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgRGlzYWJsZWQgdG8gdHJvdWJsZXNob290IHVzZXIgZWRpdCBmb3JtICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblxyXG5cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgUHJlZmlsbCBmdW5jdGlvbiBhbmQgY29uc3RhbnRzICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vLyBmdW5jdGlvbiBwcmVmaWxsRWRpdEZvcm0obW9kYWxXaW5kb3cpIHtcclxuLy8gICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4vLyAgIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbi8vICAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xyXG4vLyB9XHJcblxyXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI293bmVyLW5hbWVcIik7XHJcbmNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI293bmVyLWRlc2NyaXB0aW9uXCIpO1xyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IGxpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmVkaXRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmF2YXRhckVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYWRkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucG9wdXBFZGl0VXNlci5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcclxuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRGb3JtLm9wZW4oY3VycmVudFVzZXJJbmZvKTtcclxufSk7XHJcblxyXG5wb3B1cEVkaXRBdmF0YXIuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyRWRpdC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucG9wdXBBZGRDYXJkLmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBlZGl0Rm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpO1xyXG5jb25zdCBhdmF0YXJFZGl0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hdmF0YXInKTtcclxuY29uc3QgYWRkRm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkJyk7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWwpO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhdmF0YXJFZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgYXZhdGFyRWRpdEVsKTtcclxuYXZhdGFyRWRpdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbCIsInF1ZXJ5U2VsZWN0b3IiLCJpbnB1dEVsIiwiZXJyb3JFbCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJldmVyeSIsImRpc2FibGVkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0dXBFdmVudExpc3RlbmVycyIsImlucHV0RWxlbWVudCIsIkNhcmQiLCJhcGkiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiY3VycmVudFVzZXJJZCIsImRlbGV0ZVN1Ym1pdEhhbmRsZXIiLCJfYXBpIiwiX2RhdGEiLCJfdGl0bGUiLCJ0aXRsZSIsIl9pbWFnZSIsImltYWdlIiwiX2NhcmRJZCIsIl9pZCIsIl91c2VySWQiLCJ1c2VySWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2N1cnJlbnRVc2VySWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9kZWxldGVTdWJtaXRIYW5kbGVyIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlRWxlbWVudCIsIl9saWtlQnV0dG9uIiwic3JjIiwiYWx0IiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwibGlrZXMiLCJzb21lIiwibGlrZSIsIl9yZW1vdmVMaWtlIiwiX2FkZExpa2UiLCJfbGlrZWQiLCJsZW5ndGgiLCJhZGRMaWtlIiwidGhlbiIsInJlcyIsIl9saWtlQ291bnRlciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInJlbW92ZUxpa2UiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsIl9wb3B1cEVsZW1lbnQiLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NVcCIsImJpbmQiLCJfbW91c2VDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld0ltYWdlVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9oYW5kbGVGb3JtU3VibWl0IiwiaW5wdXRWYWx1ZSIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lIiwiZGVzY3JpcHRpb24iLCJfZGVzY3JpcHRpb24iLCJhdmF0YXIiLCJfYXZhdGFyIiwidXNlckF2YXRhciIsImZvcm1WYWxpZGF0aW9uU2V0dGluZ3MiLCJwb3B1cEVkaXRVc2VyIiwiZWRpdE1vZGFsIiwiZWRpdEJ1dHRvbiIsImNsb3NlQnV0dG9uIiwicG9wdXBFZGl0QXZhdGFyIiwic2VsZWN0b3IiLCJidXR0b24iLCJmb3JtIiwiYXZhdGFySW5wdXQiLCJwb3B1cEFkZENhcmQiLCJhZGRNb2RhbCIsImFkZEJ1dHRvbiIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJhbGwiLCJnZXRDYXJkTGlzdCIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJfY2hlY2tSZXNwb25zZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsaW5rIiwiY2FyZElEIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImFjdGl2ZUJ1dHRvbiIsInVzZXJJbmZvIiwiY2FyZFByZXZpZXdQb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwiYXV0aG9yaXphdGlvbiIsImVkaXRGb3JtIiwic2V0VXNlckluZm8iLCJ3YXJuIiwiZmluYWxseSIsImF2YXRhckVkaXQiLCJzZXRVc2VyQXZhdGFyIiwiaW5mbyIsInNldEF2YXRhciIsImFkZEZvcm0iLCJhZGRDYXJkIiwiY2FyZERhdGEiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwiZXJyb3IiLCJjYXJkIiwiaW1hZ2VEYXRhIiwib3BlbiIsIm5hbWVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjdXJyZW50VXNlckluZm8iLCJlZGl0Rm9ybUVsIiwiYXZhdGFyRWRpdEVsIiwiYWRkRm9ybUVsIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=