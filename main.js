!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function n(t,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._settings=t,this._formElement=r,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=function(t){if(Array.isArray(t))return e(t)}(o=r.querySelectorAll(t.inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonEl=r.querySelector(t.submitButtonSelector)}var r,o;return r=n,(o=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"toggleButtonState",value:function(){this._inputList.every((function(e){return e.validity.valid}))?(this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1):(this._buttonEl.classList.add(this._inactiveButtonClass),this._buttonEl.disabled=!0)}},{key:"_setupEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(n){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setupEventListeners()}},{key:"resetValidation",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&t(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){var r=t.data,o=t.handleCardClick,i=t.handleDeleteButton,a=t.handleLikeButton,u=t.currentId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=r,this._name=r.name,this._link=r.link,this._cardID=r._id,this._ownerId=r.owner._id,this._handleCardClick=o,this.handleLikeButton=a,this._handleDeleteButton=i,this._currentId=u,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){var e=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0);return this._deleteButton=e.querySelector(".delete-button"),e}},{key:"getView",value:function(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".card__image"),this._element.querySelector(".card__title").textContent=this._name,this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._imageElement.src=this._link,this._imageElement.alt="Photo of ".concat(this._link),this._currentId!==this._ownerId&&this._deleteButton.classList.add("delete-button_hidden"),this._setupEventListeners(),this._element}},{key:"_setupEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){return e._handleLikeButton()})),this._deleteButton.addEventListener("click",(function(){return e._handleDeleteButton(e._element)})),this._imageElement.addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})}))}},{key:"_handleLikeButton",value:function(){var e=this;this._data.likes.some((function(t){return t._id===e._currentUserId}))?this._removeLike():this._addLike()}},{key:"_updateLikeCounter",value:function(){this._liked=this._element.querySelector(".like-button__counter"),this._liked.textContent=this._liked.length}},{key:"_addLike",value:function(){var e=this;this._api.addLike(this._cardId).then((function(t){e._likeButton.classList.add("card__btn-like_active"),e._likeCounter.textContent=t.likes.length,e._data=t})).catch((function(e){console.log(e)}))}},{key:"_removeLike",value:function(){var e=this;this._api.removeLike(this._cardId).then((function(t){e._likeButton.classList.remove("card__btn-like_active"),e._likeCounter.textContent=t.likes.length,e._data=t})).catch((function(e){console.log(e)}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_handleEscUp",(function(e){"Escape"===e.key&&n.close()})),c(this,"_mouseClick",(function(e){e.target===n._popupElement&&n.close()})),this._popupElement=document.querySelector(t),this._handleEscUp=this._handleEscUp.bind(this)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close-button").addEventListener("click",(function(){e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscUp),document.addEventListener("mousedown",this._mouseClick)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscUp),document.removeEventListener("mousedown",this._mouseClick)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._previewImage=t._popupElement.querySelector(".popup__image"),t._previewImageTitle=t._popupElement.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e){this._previewImage.src=e.link,this._previewImage.alt="Photo of ".concat(e.link),this._previewImageTitle.textContent=e.name,f(_(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popupElement.querySelector(".popup__form"),t._inputList=t._popupElement.querySelectorAll(".popup__input"),t._submitButton=t._popupElement.querySelector(".popup__save-button"),t._handleFormSubmit=r,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;k(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){k(E(a.prototype),"close",this).call(this),this._form.reset()}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=P(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function P(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function B(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e){var t,n=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleDeleteCard=t._handleDeleteCard,t}return t=a,(n=[{key:"open",value:function(e){j(q(a.prototype),"open",this).call(this),this.deleteCard=e}},{key:"setEventListeners",value:function(){var e=this;j(q(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e.deleteCard()}))}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(){function e(t){var n=this,r=t.nameSelector,o=t.descriptionSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"getUserInfo",(function(){return{name:n._name.textContent,description:n._description.textContent,avatar:n._avatar.src}})),T(this,"setUserInfo",(function(e){var t=e.name,r=e.description;n._name.textContent=t,n._description.textContent=r})),this._name=document.querySelector(r),this._description=document.querySelector(o),this._avatar=document.querySelector(i)}var t,n;return t=e,(n=[{key:"getUserId",value:function(){return{_id:this._id}}},{key:"setAvatar",value:function(e){var t=e.userAvatar;t&&(this._avatar.src=t)}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x={inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},D=(document.querySelector(".popup_type_add"),{editModal:".popup_type_edit",nameSelector:".profile__name",descriptionSelector:".profile__description",editButton:document.querySelector(".profile__edit-button"),closeButton:document.querySelector(".popup__close-button")}),V={selector:".popup_type_avatar",avatarSelector:".profile__image",button:document.querySelector(".avatar__edit-button"),form:document.querySelector(".popup_type_avatar"),avatarInput:document.querySelector("#avatar-input")},M={addModal:".popup_type_add",addButton:document.querySelector(".profile__add-button"),closeButton:document.querySelector(".popup__close-button")};function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.querySelector(".popup__close-button");var N=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))}},{key:"getAppInfo",value:function(){return Promise.all([this.getCardList(),this.getUserInfo()])}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),J=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector(e).querySelector(".popup__save-button");n.textContent=t?"Saving...":"Save"};function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=new A({nameSelector:D.nameSelector,descriptionSelector:D.descriptionSelector,avatarSelector:V.avatarSelector}),z=new v(".popup_type_preview");z.setEventListeners();var G=new N({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"acca9dd3-a6a4-4626-88e2-60619602bdf9","Content-Type":"application/json"}});Promise.all([G.getUserInfo(),G.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];H.name,H.about,K=o._id,G.setUserInfo({name:o.name,about:o.about}),W.renderItems(i.reverse())})).catch((function(e){return console.warn("${err}")}));var K=null,Q=function(e){var t=new o({currentId:K,data:e,handleCardClick:function(){z.open(e)},handleDeleteButton:function(t){ee.open((function(){G.removeCard(e._id).then((function(){t.remove(),ee.close()})).catch((function(e){console.log("There was an issue deleting this card: ".concat(e))}))}))},handleLikeButton:function(t){return t?G.addLike(e._id):G.removeLike(e._id)}},"#cardTemplate");return console.log(t),t},W=new a({renderer:function(e){var t=Q(e).getView();W.addItem(t)}},"#placesList"),X=new O({popupSelector:D.editModal,handleFormSubmit:function(e){J(D.editModal,!0),G.setUserInfo({name:e.name,about:e.description}).then((function(e){H.setUserInfo({name:e.name,description:e.about}),X.close()})).catch((function(e){return console.warn("Unable to update profile information: ".concat(e))})).finally((function(){J(D.editModal)}))}}),Y=new O({popupSelector:V.selector,handleFormSubmit:function(e){J(V.selector,!0),G.setUserAvatar({avatar:e.avatar}).then((function(e){H.setAvatar({userAvatar:e.avatar}),Y.close()})).catch((function(e){return console.warn("Unable change the user avatar: ".concat(e))})).finally((function(){J(V.selector)}))}}),Z=new O({popupSelector:M.addModal,handleFormSubmit:function(e){J(M.addModal,!0),G.addCard(e).then((function(e){var t=Q(e);W.addItem(t.getView()),Z.close()})).catch((function(e){return console.warn("Unable to add a card: ".concat(e))})).finally((function(){J(M.addModal)}))}}),ee=new R({popupSelector:".popup_type_delete",handleDeleteCard:function(){}}),te=document.querySelector("#owner-name"),ne=document.querySelector("#owner-description");X.setEventListeners(),Y.setEventListeners(),Z.setEventListeners(),ee.setEventListeners(),D.editButton.addEventListener("click",(function(){var e=H.getUserInfo();te.value=e.name,ne.value=e.description,X.open(e)})),V.button.addEventListener("click",(function(){Y.open()})),M.addButton.addEventListener("click",(function(){Z.open()}));var re=document.querySelector(".popup_type_edit"),oe=document.querySelector(".popup_type_avatar"),ie=document.querySelector(".popup_type_add");new n(x,re).enableValidation(),new n(x,oe).enableValidation(),new n(x,ie).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UjBDLE1BQUssU0FBQzFDLEdBQ0wsSUFBTWlLLEVBQVdoQixFQUFXakosR0FDNUI2SSxFQUFTVyxRQUFRUyxFQUFRVixXQUN6QlEsRUFBUWpHLFdBRVRqQixPQUFNLFNBQUNDLEdBQUQsT0FBU0MsUUFBUWlHLEtBQVIsZ0NBQXNDbEcsT0FDckQ2RyxTQUFRLFdBQ1AzQixFQUFjeEIsRUFBYUMsZ0JBSzdCMkMsR0FBa0IsSUFBSWxFLEVBQXNCLENBQ2hEdEIsY0h4SW9CLHFCR3lJcEJzRyxpQkFBa0IsZUE0QmRDLEdBQVloSixTQUFTN0MsY0FBYyxlQUNuQzhMLEdBQW1CakosU0FBUzdDLGNBQWMsc0JBTWhEbUwsRUFBU3BCLG9CQUNUdUIsRUFBV3ZCLG9CQUNYMEIsRUFBUTFCLG9CQUNSZSxHQUFnQmYsb0JBRWhCdEMsRUFBY0UsV0FBVzFHLGlCQUFpQixTQUFTLFdBQ2pELElBQU04SyxFQUFrQmxDLEVBQVNaLGNBQ2pDNEMsR0FBVXBGLE1BQVFzRixFQUFnQjlKLEtBQ2xDNkosR0FBaUJyRixNQUFRc0YsRUFBZ0I1RSxZQUN6Q2dFLEVBQVNOLEtBQUtrQixNQUdoQmxFLEVBQWdCRSxPQUFPOUcsaUJBQWlCLFNBQVMsV0FDL0NxSyxFQUFXVCxVQUdiM0MsRUFBYUUsVUFBVW5ILGlCQUFpQixTQUFTLFdBQy9Dd0ssRUFBUVosVUFPVixJQUFNbUIsR0FBYW5KLFNBQVM3QyxjQUFjLG9CQUNwQ2lNLEdBQWVwSixTQUFTN0MsY0FBYyxzQkFDdENrTSxHQUFZckosU0FBUzdDLGNBQWMsbUJBRWYsSUFBSW5CLEVBQWMySSxFQUF3QndFLElBQ2xERyxtQkFFVSxJQUFJdE4sRUFBYzJJLEVBQXdCeUUsSUFDbERFLG1CQUVLLElBQUl0TixFQUFjMkksRUFBd0IwRSxJQUNsREMsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIGVycm9yRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGFsbFZhbGlkID0gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICAgICAgICBpZiAoYWxsVmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldHVwRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3Ioe2RhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQnV0dG9uLCBoYW5kbGVMaWtlQnV0dG9uLCBjdXJyZW50SWR9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZElEID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLmhhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbiA9IGhhbmRsZURlbGV0ZUJ1dHRvbjtcclxuICAgICAgICB0aGlzLl9jdXJyZW50SWQgPSBjdXJyZW50SWQ7XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICAnLmRlbGV0ZS1idXR0b24nLFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmlldygpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9saW5rfWA7XHJcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnZGVsZXRlLWJ1dHRvbl9oaWRkZW4nKTtcclxuICAgICAgICB9ICAgXHJcbiAgICAgICAgdGhpcy5fc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX293bmVySWQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX2N1cnJlbnRJZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKHRoaXMuX2VsZW1lbnQpKTtcclxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBpc0xpa2VkID0gdGhpcy5fZGF0YS5saWtlcy5zb21lKChsaWtlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsaWtlLl9pZCA9PT0gdGhpcy5fY3VycmVudFVzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoaXNMaWtlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVMaWtlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYWRkTGlrZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdXBkYXRlTGlrZUNvdW50ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZWQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25fX2NvdW50ZXJcIik7XHJcbiAgICAgICAgdGhpcy5fbGlrZWQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlZC5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBfYWRkTGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9hcGlcclxuICAgICAgICAgICAgLmFkZExpa2UodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2J0bi1saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YSA9IHJlcztcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmVMaWtlKCkge1xyXG4gICAgICAgIHRoaXMuX2FwaVxyXG4gICAgICAgICAgICAucmVtb3ZlTGlrZSh0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fYnRuLWxpa2VfYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhID0gcmVzO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTsgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NVcCA9IHRoaXMuX2hhbmRsZUVzY1VwLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSAgICBcclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY1VwKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9tb3VzZUNsaWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NVcCk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5fbW91c2VDbGljayk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY1VwID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9tb3VzZUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07ICAgIFxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJy5wb3B1cF9faW1hZ2UnLFxyXG4gICAgKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICcucG9wdXBfX2NhcHRpb24nLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBgUGhvdG8gb2YgJHtkYXRhLmxpbmt9YDtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZTtcclxuICB9XHJcbiAgXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gIH0pXHJcbiB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZDtcclxuICB9XHJcblxyXG4gIG9wZW4oZGVsZXRlQ2FyZCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5kZWxldGVDYXJkID0gZGVsZXRlQ2FyZDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLmRlbGV0ZUNhcmQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gb3BlbihjYXJkSUQsIGVsZW1lbnQpIHtcclxuICAvLyAgIHRoaXMuX2NhcmRJRCA9IGNhcmRJRDtcclxuICAvLyAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xyXG4gIC8vICAgc3VwZXIub3BlbigpO1xyXG4gIC8vIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySWQgKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIF9pZDogdGhpcy5faWQsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8gPSAoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSAgPT4ge1xyXG4gICAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgLy8gdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdmF0YXIoeyB1c2VyQXZhdGFyIH0pIHtcclxuICAgICAgICBpZiAodXNlckF2YXRhcikge1xyXG4gICAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSB1c2VyQXZhdGFyO1xyXG4gICAgfVxyXG59XHJcbn0iLCJleHBvcnQgY29uc3QgZm9ybVZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZS1idXR0b25fdHlwZV9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgfTtcclxuXHJcbiAgZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICAgICAgY2FyZFNlY3Rpb246ICcjcGxhY2VzTGlzdCcsXHJcbiAgICAgIGNhcmRUZW1wbGF0ZTogJyNjYXJkVGVtcGxhdGUnLFxyXG4gICAgICBwcmV2aWV3UG9wdXA6ICcucG9wdXBfdHlwZV9wcmV2aWV3JyxcclxuICAgICAgYWRkTW9kYWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hZGRcIiksXHJcbiAgfTtcclxuXHJcbiAgZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFVzZXIgPSB7XHJcbiAgICBlZGl0TW9kYWw6IFwiLnBvcHVwX3R5cGVfZWRpdFwiLFxyXG4gICAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gICAgZWRpdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKSxcclxuICAgIGNsb3NlQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIiksXHJcbiAgfVxyXG5cclxuICBleHBvcnQgY29uc3QgcG9wdXBFZGl0QXZhdGFyID0ge1xyXG4gICAgc2VsZWN0b3I6ICcucG9wdXBfdHlwZV9hdmF0YXInLFxyXG4gICAgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9faW1hZ2UnLFxyXG4gICAgYnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXZhdGFyX19lZGl0LWJ1dHRvbicpLFxyXG4gICAgZm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYXZhdGFyJyksXHJcbiAgICBhdmF0YXJJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhci1pbnB1dCcpLFxyXG4gIH07ICBcclxuXHJcbiAgZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZCA9IHtcclxuICAgIGFkZE1vZGFsOiBcIi5wb3B1cF90eXBlX2FkZFwiLFxyXG4gICAgYWRkQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpLFxyXG4gICAgY2xvc2VCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyksXHJcbiAgfVxyXG4gIFxyXG4gIGV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZUNhcmQgPSB7XHJcbiAgZGVsZXRlQ2FyZFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlX2RlbGV0ZVwiLFxyXG4gIGRlbGV0ZUNhcmRCdXR0b246IFwiLmRlbGV0ZS1idXR0b25cIixcclxuICBjbG9zZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKSxcclxuIH1cclxuICIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG4gIFxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0QXBwSW5mbygpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRDYXJkTGlzdCgpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcbiAgXHJcbiAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCBfaWQgKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHsgX2lkIH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpOyIsImV4cG9ydCBjb25zdCByZW5kZXJMb2FkaW5nID0gKHBvcHVwU2VsZWN0b3IsIGlzTG9hZGluZyA9IGZhbHNlKSA9PiB7XHJcbiAgICBjb25zdCBhY3RpdmVCdXR0b24gPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIik7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIGFjdGl2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3RpdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9OyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbXBvcnQgY2xhc3NlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgc2VsZWN0b3JzLCBwb3B1cEVkaXRVc2VyLCBwb3B1cEVkaXRBdmF0YXIsIHBvcHVwQWRkQ2FyZCwgcG9wdXBEZWxldGVDYXJkIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgeyByZW5kZXJMb2FkaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZSBpbnN0YW5jZXMgb2YgdGhlIGNsYXNzZXMgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogcG9wdXBFZGl0VXNlci5uYW1lU2VsZWN0b3IsXHJcbiAgZGVzY3JpcHRpb25TZWxlY3RvcjogcG9wdXBFZGl0VXNlci5kZXNjcmlwdGlvblNlbGVjdG9yLFxyXG4gIGF2YXRhclNlbGVjdG9yOiBwb3B1cEVkaXRBdmF0YXIuYXZhdGFyU2VsZWN0b3IsXHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcclxuY2FyZFByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTInLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdhY2NhOWRkMy1hNmE0LTQ2MjYtODhlMi02MDYxOTYwMmJkZjknLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9LFxyXG59KTtcclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgV29ya2luZyBvbiBwcm9taXNlIGFsbCB0byBnZXQgY2FyZHMgYW5kIHVzZXIgaW5mbyAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCkgXSlcclxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgYXBpLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgYWJvdXQ6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICAvLyB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcy5yZXZlcnNlKCkpO1xyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgIC8qICAgICAgICAgICAgICAgICAgICBjb25zb2xlIGxvZyBjYXJkcyB0byBjaGVjayBvd25lciBkYXRhICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgLy8gY29uc29sZS5sb2codXNlckRhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUud2FybignJHtlcnJ9JykpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5vdGhlciBhdHRlbXB0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblxyXG5sZXQgdXNlcklkID0gbnVsbDtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgY3VycmVudElkOiB1c2VySWQsXHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgIGNhcmRQcmV2aWV3UG9wdXAub3BlbihkYXRhKVxyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVEZWxldGVCdXR0b246IChjYXJkRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHtjYXJkRWxlbWVudH0pO1xyXG4gICAgICAgIHJlbW92ZUNhcmRQb3B1cC5vcGVuKCgpID0+IHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgLnJlbW92ZUNhcmQoZGF0YS5faWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICByZW1vdmVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVGhlcmUgd2FzIGFuIGlzc3VlIGRlbGV0aW5nIHRoaXMgY2FyZDogJHtlcnJ9YCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlQnV0dG9uOiAoYnV0dG9uTGlrZWQpID0+IHtcclxuICAgICAgICByZXR1cm4gYnV0dG9uTGlrZWQgPyBhcGkuYWRkTGlrZShkYXRhLl9pZCkgOiBhcGkucmVtb3ZlTGlrZShkYXRhLl9pZClcclxuICAgICAgfSxcclxuICAgICAgLy8gdXNlcklkOiB1c2VySW5mby5nZXRVc2VySWQoKSxcclxuICAgIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5sb2coY2FyZCk7XHJcbiAgICByZXR1cm4gY2FyZDtcclxuICB9XHJcbiAgXHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXdDYXJkLmdldFZpZXcoKTtcclxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gIH0sXHJcbn0sXHJcbnNlbGVjdG9ycy5jYXJkU2VjdGlvblxyXG4pO1xyXG5cclxuXHJcbmNvbnN0IGVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwRWRpdFVzZXIuZWRpdE1vZGFsLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHBvcHVwRWRpdFVzZXIuZWRpdE1vZGFsLCB0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0VXNlckluZm8oe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGluZm8pID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICBuYW1lOiBpbmZvLm5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogaW5mby5hYm91dCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0Rm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT5cclxuICAgICAgICBjb25zb2xlLndhcm4oYFVuYWJsZSB0byB1cGRhdGUgcHJvZmlsZSBpbmZvcm1hdGlvbjogJHtlcnJ9YClcclxuICAgICAgKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcmVuZGVyTG9hZGluZyhwb3B1cEVkaXRVc2VyLmVkaXRNb2RhbCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYXZhdGFyRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEVkaXRBdmF0YXIuc2VsZWN0b3IsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIHJlbmRlckxvYWRpbmcocG9wdXBFZGl0QXZhdGFyLnNlbGVjdG9yLCB0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0VXNlckF2YXRhcih7IFxyXG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIgfSlcclxuICAgICAgLnRoZW4oKGluZm8pID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXIoeyB1c2VyQXZhdGFyOiBpbmZvLmF2YXRhciB9KTtcclxuICAgICAgICBhdmF0YXJFZGl0LmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLndhcm4oYFVuYWJsZSBjaGFuZ2UgdGhlIHVzZXIgYXZhdGFyOiAke2Vycn1gKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHJlbmRlckxvYWRpbmcocG9wdXBFZGl0QXZhdGFyLnNlbGVjdG9yKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5cclxuY29uc3QgYWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEFkZENhcmQuYWRkTW9kYWwsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIHJlbmRlckxvYWRpbmcocG9wdXBBZGRDYXJkLmFkZE1vZGFsLCB0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkQ2FyZChkYXRhKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSAoY3JlYXRlQ2FyZChkYXRhKSk7XHJcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShuZXdDYXJkLmdldFZpZXcoKSk7XHJcbiAgICAgICAgYWRkRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS53YXJuKGBVbmFibGUgdG8gYWRkIGEgY2FyZDogJHtlcnJ9YCkpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICByZW5kZXJMb2FkaW5nKHBvcHVwQWRkQ2FyZC5hZGRNb2RhbCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgcmVtb3ZlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XHJcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBEZWxldGVDYXJkLmRlbGV0ZUNhcmRTZWxlY3RvcixcclxuICBoYW5kbGVEZWxldGVDYXJkOiAoKSA9PiB7fSxcclxufSlcclxuXHJcbiAgLy8gZGVsZXRlU3VibWl0SGFuZGxlcjogKGNhcmRFbGVtZW50LCBjYXJkSWQpID0+IHtcclxuICAvLyAgIGNoYW5nZUxvYWRpbmdUZXh0KHRydWUsIGFkZENhcmRDb25zdGFudHMuZGVsZXRlQ2FyZFNlbGVjdG9yLCBcIkRlbGV0aW5nLi4uXCIpO1xyXG5cclxuICAvLyAgIGFwaS5yZW1vdmVDYXJkKF9pZCkudGhlbigoKSA9PiB7XHJcbiAgLy8gICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIC8vICAgICBkZWxldGVDYXJkTW9kYWwuY2xvc2UoKTtcclxuXHJcbiAgLy8gICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAvLyAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuXHJcbiAgLy8gICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAvLyAgICAgY2hhbmdlTG9hZGluZ1RleHQoZmFsc2UsIGFkZENhcmRDb25zdGFudHMuZGVsZXRlQ2FyZFNlbGVjdG9yLCBcIkRlbGV0ZVwiKTtcclxuICAvLyAgIH0pXHJcbiAgLy8gfVxyXG5cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICBQcmVmaWxsIGZ1bmN0aW9uIGFuZCBjb25zdGFudHMgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8vIGZ1bmN0aW9uIHByZWZpbGxFZGl0Rm9ybShtb2RhbFdpbmRvdykge1xyXG4vLyAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbi8vICAgbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuLy8gICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XHJcbi8vIH1cclxuXHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3duZXItbmFtZVwiKTtcclxuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3duZXItZGVzY3JpcHRpb25cIik7XHJcblxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgbGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYXZhdGFyRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnJlbW92ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucG9wdXBFZGl0VXNlci5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcclxuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRGb3JtLm9wZW4oY3VycmVudFVzZXJJbmZvKTtcclxufSk7XHJcblxyXG5wb3B1cEVkaXRBdmF0YXIuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyRWRpdC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucG9wdXBBZGRDYXJkLmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5jb25zdCBlZGl0Rm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpO1xyXG5jb25zdCBhdmF0YXJFZGl0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hdmF0YXInKTtcclxuY29uc3QgYWRkRm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkJyk7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWwpO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhdmF0YXJFZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgYXZhdGFyRWRpdEVsKTtcclxuYXZhdGFyRWRpdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbCIsInF1ZXJ5U2VsZWN0b3IiLCJpbnB1dEVsIiwiZXJyb3JFbCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJldmVyeSIsImRpc2FibGVkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0dXBFdmVudExpc3RlbmVycyIsImlucHV0RWxlbWVudCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiaGFuZGxlTGlrZUJ1dHRvbiIsImN1cnJlbnRJZCIsIl9kYXRhIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRJRCIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9jdXJyZW50SWQiLCJfY2FyZFNlbGVjdG9yIiwiY2FyZEVsZW1lbnQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9pbWFnZUVsZW1lbnQiLCJfbGlrZUJ1dHRvbiIsInNyYyIsImFsdCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwibGlrZXMiLCJzb21lIiwibGlrZSIsIl9jdXJyZW50VXNlcklkIiwiX3JlbW92ZUxpa2UiLCJfYWRkTGlrZSIsIl9saWtlZCIsImxlbmd0aCIsIl9hcGkiLCJhZGRMaWtlIiwiX2NhcmRJZCIsInRoZW4iLCJyZXMiLCJfbGlrZUNvdW50ZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVMaWtlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtcyIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwiX21vdXNlQ2xpY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdJbWFnZVRpdGxlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9zdWJtaXRCdXR0b24iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImlucHV0VmFsdWUiLCJpbnB1dCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsImRlc2NyaXB0aW9uIiwiX2Rlc2NyaXB0aW9uIiwiYXZhdGFyIiwiX2F2YXRhciIsInVzZXJBdmF0YXIiLCJmb3JtVmFsaWRhdGlvblNldHRpbmdzIiwicG9wdXBFZGl0VXNlciIsImVkaXRNb2RhbCIsImVkaXRCdXR0b24iLCJjbG9zZUJ1dHRvbiIsInBvcHVwRWRpdEF2YXRhciIsInNlbGVjdG9yIiwiYnV0dG9uIiwiZm9ybSIsImF2YXRhcklucHV0IiwicG9wdXBBZGRDYXJkIiwiYWRkTW9kYWwiLCJhZGRCdXR0b24iLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYWxsIiwiZ2V0Q2FyZExpc3QiLCJnZXRVc2VySW5mbyIsImZldGNoIiwiX2NoZWNrUmVzcG9uc2UiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElEIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImFjdGl2ZUJ1dHRvbiIsInVzZXJJbmZvIiwiY2FyZFByZXZpZXdQb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImdldEluaXRpYWxDYXJkcyIsInVzZXJEYXRhIiwiY2FyZHMiLCJ1c2VySWQiLCJzZXRVc2VySW5mbyIsImNhcmRMaXN0IiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwid2FybiIsImNyZWF0ZUNhcmQiLCJjYXJkIiwib3BlbiIsInJlbW92ZUNhcmRQb3B1cCIsInJlbW92ZUNhcmQiLCJidXR0b25MaWtlZCIsImdldFZpZXciLCJhZGRJdGVtIiwiZWRpdEZvcm0iLCJpbmZvIiwiZmluYWxseSIsImF2YXRhckVkaXQiLCJzZXRVc2VyQXZhdGFyIiwic2V0QXZhdGFyIiwiYWRkRm9ybSIsImFkZENhcmQiLCJuZXdDYXJkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIm5hbWVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjdXJyZW50VXNlckluZm8iLCJlZGl0Rm9ybUVsIiwiYXZhdGFyRWRpdEVsIiwiYWRkRm9ybUVsIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=